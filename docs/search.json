[
  {
    "objectID": "posts/2023-12-13-ej-redlining-la-blog/index.html",
    "href": "posts/2023-12-13-ej-redlining-la-blog/index.html",
    "title": "Environmental justice impacts of historical redlining in Los Angeles County",
    "section": "",
    "text": "1930 map of Los Angeles County neighborhoods divided into Home Owners’ Loan Corporation (HOLC) grades A (green; desirable) to D (red; undesirable). Photograph courtesy of Mapping Inequality"
  },
  {
    "objectID": "posts/2023-12-13-ej-redlining-la-blog/index.html#footnotes",
    "href": "posts/2023-12-13-ej-redlining-la-blog/index.html#footnotes",
    "title": "Environmental justice impacts of historical redlining in Los Angeles County",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nGee, G. C. (2008). A multilevel analysis of the relationship between institutional and individual racial discrimination and health status. American Journal of Public Health, 98(Supplement_1), S48-S56. [DOI: 10.2105/AJPH.98.Supplement_1.S48]↩︎\nNardone, A., Rudolph, K. E., Morello-Frosch, R., & Casey, J. A. (2021). Redlines and greenspace: The relationship between historical redlining and 2010 greenspace across the United States. Environmental Health Perspectives, 129(1), 017006. [DOI: 10.1289/EHP6729]↩︎\nHoffman, J. S., Shandas, V., & Pendleton, N. (2020). The effects of historical housing policies on resident exposure to intra-urban heat: A study of 108 US urban areas. Climate, 8(1), 12. [DOI: 10.3390/cli8010012]↩︎\nEllis-Soto, D., Chapman, M., & Locke, D. H. (2023). Historical redlining is associated with increasing geographical disparities in bird biodiversity sampling in the United States. Nature Human Behaviour, 1-9. [DOI: 10.1038/s41562-022-01389-3]↩︎\nEllis-Soto, D., Chapman, M., & Locke, D. H. (2023). Historical redlining is associated with increasing geographical disparities in bird biodiversity sampling in the United States. Nature Human Behaviour, 1-9. [DOI: 10.1038/s41562-022-01389-3]↩︎"
  },
  {
    "objectID": "posts/2023-12-17-houston-blackouts-ej/index.html",
    "href": "posts/2023-12-17-houston-blackouts-ej/index.html",
    "title": "Geospatial extent of power outages in Houston, Texas caused by Winter Storm Uri in 2021",
    "section": "",
    "text": "Power lines damaged by Winter Storm Uri in February 2021. Photograph sourced from https://www.crawco.com/blog/energy-companies-deal-with-the-aftermath-of-winter-storms-uri-and-viola"
  },
  {
    "objectID": "posts/2023-12-17-houston-blackouts-ej/index.html#footnotes",
    "href": "posts/2023-12-17-houston-blackouts-ej/index.html#footnotes",
    "title": "Geospatial extent of power outages in Houston, Texas caused by Winter Storm Uri in 2021",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nThe Great Texas Freeze: February 11-20, 2021 (2023). National Centers for Environmental Information. National Oceanic and Atmospheric Administration. [https://www.ncei.noaa.gov/news/great-texas-freeze-february-2021]↩︎\nDoss-Gollin, J., Farnham, D.J., Lall, U., & Modi, V. (2021). How unprecedented was the February 2021 Texas cold snap? Environmental Research Letters, 16 (6). [DOI 10.1088/1748-9326/ac0278]↩︎\nThe Great Texas Freeze: February 11-20, 2021 (2023). National Centers for Environmental Information. National Oceanic and Atmospheric Administration. [https://www.ncei.noaa.gov/news/great-texas-freeze-february-2021]↩︎\nLi, Z., Li, X., Wang, Y., Quiring, S.M. (2019). Impact of climate change on precipitation patterns in Houston, Texas, USA. Anthropocene, 25. [DOI10.1016/j.ancene.2019.100193]↩︎\nLi, Z., Li, X., Wang, Y., Quiring, S.M. (2019). Impact of climate change on precipitation patterns in Houston, Texas, USA. Anthropocene, 25. [DOI10.1016/j.ancene.2019.100193]↩︎\nKaufmann, R.K., Kelly-Fair, M., Schroer, C. (2024). Distributive energy justice: Who lost power in Texas during the 2021 winter storm? Energy Research & Social Science, 109. [https://doi.org/10.1016/j.erss.2024.103416]↩︎\nKaufmann, R.K., Kelly-Fair, M., Schroer, C. (2024). Distributive energy justice: Who lost power in Texas during the 2021 winter storm? Energy Research & Social Science, 109. [https://doi.org/10.1016/j.erss.2024.103416]↩︎"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Kristin Art",
    "section": "",
    "text": "Hi there!\nMy name is Kristin and I am an environmental scientist who loves playing with data! I created this website to share my professional skills and personal hobbies with people like you, so thanks for stopping by.\n\n\n\nEducation\nMS in Environmental Science & Management (expected 2024) University of California, Santa Barbara\nBS in Biological Sciences (2019) University of Southern California\n\n\n\nExperience\nEnvironmental Trainee (2023-present) Environmental Protection Agency, Washington, DC\nEnvironmental Analyst (2020-2022) San Francisco Estuary Institute, Richmond, CA"
  },
  {
    "objectID": "about.html#growing-up",
    "href": "about.html#growing-up",
    "title": "About",
    "section": "Growing Up",
    "text": "Growing Up\n\n\n\n\n\n\n\n\n\n\nI grew up in San Leandro, California and Reno, Nevada. My family moved to Reno right before my sophomore year of high school, which felt like the end of the world as a fifteen year old girl. Little did I know then that living in Reno (45 minutes away from Tahoe) would help me discover a love for the outdoors and send me down the best career path I could imagine.\nIn 2011, I transferred to a magnet high school, where I took community college courses for dual credit. It was there that I found a mentor in my microbiology course professor; I would not be where I am today without her encouragement, support, and passion! Thanks to her, I began interning at the Desert Research Institute in 2012, where I spent my time meticulously measuring Antarctic krill under a microscope (too bad I did not know about podcasts back then - I could have listened to so many true crime episodes).\nAfter receiving my Associate of Science in 2013, I decided I was ahead of the game and could afford to take a gap year. That year turned into 3.5 years away from academia… I spent the first 2.5 years volunteering with a service program focused on community development; through the program, I traveled across the contiguous US, Alaska, Hawaii, Panama, and Korea and met tons of amazing humans. After coming home, I spent another year working in the service industry and applying to transfer into a university."
  },
  {
    "objectID": "about.html#back-to-the-east-bay-and-into-water-quality-work",
    "href": "about.html#back-to-the-east-bay-and-into-water-quality-work",
    "title": "About",
    "section": "Back to the East Bay and into Water Quality Work!",
    "text": "Back to the East Bay and into Water Quality Work!\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nA couple weeks after graduating, I began working as an Environmental Analyst at the San Francisco Estuary Institute (SFEI). Not only was I ecstatic to be back in the East Bay Area, but the position was a wholesome blend of fieldwork, labwork, and data analysis. My team, the Nutrient Management Strategy, utilized coupled biogeochemical-hydrodynamic modeling and monitoring to understand the current and future health of the San Francisco Bay Area. I was part of the monitoring team and became the field lead of a network of water quality monitoring instruments in the San Francisco Bay called the Moored Sensor Program. This position involved everything from coordinating with US Geological Survey (USGS) collaborators for regular fieldwork to technical troubleshooting of our instruments to QA/QC of the measured data in Python. Speaking of Python, this was my first introduction to the language and boy did I struggle to learn it. It was only with the continued patience and help of my genius supervisor (and many hours on Stack Overflow) that I became proficient in the language. It’s funny to look back on now because I have since fallen in love with data science and hope to spend the majority of time during my next career position coding.\n\n\n\n\n\n\nPretending to captain the research vessel (2021)\n\n\n\n\n\n\n\nEarly morning sunrise in Alviso Slough (2021)\n\n\n\n\n\n\n\nPreparing a research buoy for deployment (2022)"
  },
  {
    "objectID": "about.html#graduate-school-and-my-shift-to-data-science-in-the-energy-sector",
    "href": "about.html#graduate-school-and-my-shift-to-data-science-in-the-energy-sector",
    "title": "About",
    "section": "Graduate School and my Shift to Data Science in the Energy Sector",
    "text": "Graduate School and my Shift to Data Science in the Energy Sector\nIn September of 2022, I began pursuing a Master’s in Environmental Science & Management at the Bren School at the University of California, Santa Barbara. I’ve focused my coursework on energy, climate, corporate sustainability, and data science. I particularly enjoy analyzing and communicating data from the energy sector. I spent the summer of 2023 interning at the Environmental Protection Agency federal headquarters in Washington, D.C., where I did data analyses and visualizations of power sector emissions for the Clean Air Markets Division. Now, most of my focus is concentrated on finishing our group master’s project, which aims to analyze the parity between potential supply and demand of hydrogen as an alternative fuel source in California."
  },
  {
    "objectID": "about.html#hobbies",
    "href": "about.html#hobbies",
    "title": "About",
    "section": "Hobbies",
    "text": "Hobbies\nIn my free time these days, I love to mountain bike, camp, cook, swim, read, and puzzle. In 2020, I went on my first bikepacking trip and fell in love. Since then, I’ve gone on 7 or so multi-day trips with amazing friends in places like Tahoe National Forest, the Lost Coast, Catalina Island, and more. Please enjoy the photos below as we collectively pretend we are in the mountains instead of behind a desk. I also love spending time with my cuddly cat, Lilo.\n\n\n\n\n\n\nBikepacking Catalina Island (2023)\n\n\n\n\n\n\n\nLord of the Squirrels trail in Whistler, Canada (aka the best trail ever; 2022)\n\n\n\n\n\n\n\n\n\nBikepacking the Tahoe Rim Trail (2021)\n\n\n\n\n\n\n\nBikepacking Catalina Island (the first time - 2021)\n\n\n\n\n\n\n\n\n\nBikepacking the Stanislaus National Forest (2022)\n\n\n\n\n\n\n\nScotts Lake in Toiyabe National Forest (2022)\n\n\n\n\n\n\n\n\n\nBikepacking the Anza-Borrego Desert (2023)\n\n\n\n\n\n\n\nBikepacking the Lost Coast (2021)"
  },
  {
    "objectID": "posts.html",
    "href": "posts.html",
    "title": "Projects",
    "section": "",
    "text": "Vizualizing California’s Green Hydrogen Supply and Transportation Sector Demand\n\n\n\n\n\n\n\nR\n\n\nQuarto\n\n\nGit\n\n\nSpatial\n\n\nViz\n\n\n\n\nData viz for science communication\n\n\n\n\n\n\nMar 6, 2024\n\n\nKristin Art\n\n\n\n\n\n\n  \n\n\n\n\nGeospatial extent of power outages in Houston, Texas caused by Winter Storm Uri in 2021\n\n\n\n\n\n\n\nR\n\n\nQuarto\n\n\nGit\n\n\nSpatial\n\n\nEJ\n\n\n\n\nSpatial analysis using satellite data\n\n\n\n\n\n\nDec 16, 2023\n\n\nKristin Art\n\n\n\n\n\n\n  \n\n\n\n\nEnvironmental justice impacts of historical redlining in Los Angeles County\n\n\n\n\n\n\n\nR\n\n\nQuarto\n\n\nGit\n\n\nSpatial\n\n\nEJ\n\n\nPollution\n\n\n\n\nPresent-day effects of past injustices\n\n\n\n\n\n\nDec 13, 2023\n\n\nKristin Art\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "I enjoy analyzing and visualizing data to tell stories about how electricity generation relates to emissions, ambient air quality, and environmental justice. I use both statistical analysis (including statistical machine learning algorithms) and spatial analysis to do so. I prefer to work in the R language and am in the process of populating the projects tab of this website with more of my recent work."
  },
  {
    "objectID": "about.html#graduate-school",
    "href": "about.html#graduate-school",
    "title": "About",
    "section": "Graduate School",
    "text": "Graduate School\nI am currently a second-year Master’s Student at the Bren School of Environmental Science & Management at the University of California, Santa Barbara. During my time at Bren, I have focused my coursework on data science while officially specializing in Corporate Sustainability and Energy & Climate. My main focus right now is finishing up my year-long master’s group project, which aims to analyze the parity between potential supply and demand of hydrogen as an alternative fuel source in California. Our client for the project is the California Governor’s Office of Business & Economic Development and I serve as both a Data Analyst and Financial Manager."
  },
  {
    "objectID": "about.html#environmental-protection-agency",
    "href": "about.html#environmental-protection-agency",
    "title": "About",
    "section": "Environmental Protection Agency",
    "text": "Environmental Protection Agency\n\n\n\n\n\n\n\n\n\n\n\n\n\nDuring the summer of 2023, I interned at the Environmental Protection Agency federal headquarters in Washington, DC. More specifically, I worked in the Emissions Monitoring Branch of the Clean Air Markets Division of the Office of Air and Radiation. While there, I completed analyses and visualizations of power sector data for the Clean Air Markets Division and the Emissions Monitoring Branch. For instance, I analyzed the number of electricity-generating units (EGUs) in US power plants that are associated with complex and multi-stack configurations to inform how emissions from these EGUs should be handled in federal policies like the Good Neighbor Rule. I also drafted a public webpage to communicate how consumption-based electricity generation rates differ from production-based rates in the EPA’s Emissions and Generation Integrated Resource Database (eGRID) by developing interactive visualizations."
  },
  {
    "objectID": "about.html#san-francisco-estuary-institute",
    "href": "about.html#san-francisco-estuary-institute",
    "title": "About",
    "section": "San Francisco Estuary Institute",
    "text": "San Francisco Estuary Institute\n\n\n\n\n\n\nPretending to captain the research vessel (2021)\n\n\n\n\n\n\n\nEarly morning sunrise in Alviso Slough (2021)\n\n\n\n\n\n\n\nPreparing a research buoy for deployment (2022)\n\n\n\n\n\nBefore starting my graduate program, I worked at the San Francisco Estuary Institute (SFEI) as an Environmental Analyst for 2.75 years. Not only did I love being back in the East Bay Area (where I grew up), but I also appreciated that the position was a wholesome blend of fieldwork, lab work, and data analysis. My team, the Nutrient Management Strategy, utilized coupled biogeochemical-hydrodynamic modeling and monitoring to understand the current and future health of the San Francisco Bay Area. I was part of the monitoring team and became the field lead of a network of water quality monitoring instruments in the San Francisco Bay called the Moored Sensor Program. This position involved everything from coordinating with US Geological Survey (USGS) collaborators for regular fieldwork to technical troubleshooting of our instruments to QA/QC of the measured data in Python.\nSpeaking of Python, this was my first introduction to the language, and boy, did I struggle to learn it. It was only with the continued patience and help of my genius supervisor (and many hours on Stack Overflow) that I became somewhat proficient in the language. It’s funny to look back on now because I have since fallen in love with data science."
  },
  {
    "objectID": "about.html#university-of-southern-california",
    "href": "about.html#university-of-southern-california",
    "title": "About",
    "section": "University of Southern California",
    "text": "University of Southern California\nBefore working at SFEI, I attended the University of Southern California (USC) between January 2017 - December 2019. I graduated with a Bachelor of Science in Biological Sciences and an emphasis in Marine and Environmental Biology. Not only was I lucky enough to receive a full ride (since I am a first-generation college student from a low-income family), but I also assisted two research labs while there. In the research labs, I helped multiple PhD students study the growth and toxicity of phytoplankton species under various climate conditions. Although I have since steered my career away from this topic, I still love geeking out about phytoplankton and harmful algal blooms."
  },
  {
    "objectID": "posts/2024-03-06-h2-data-viz/index.html",
    "href": "posts/2024-03-06-h2-data-viz/index.html",
    "title": "Vizualizing California’s Green Hydrogen Supply and Transportation Sector Demand in 2030",
    "section": "",
    "text": "Power lines damaged by Winter Storm Uri in February 2021. Photograph sourced from https://www.crawco.com/blog/energy-companies-deal-with-the-aftermath-of-winter-storms-uri-and-viola"
  },
  {
    "objectID": "posts/2024-03-06-h2-data-viz/index.html#introduction",
    "href": "posts/2024-03-06-h2-data-viz/index.html#introduction",
    "title": "Vizualizing California’s Green Hydrogen Supply and Transportation Sector Demand in 2030",
    "section": "",
    "text": "I created the infographic below to explore the spatial distribution of hydrogen supply and demand across California in 2030. More specifically, I compared estimates of green (renewable) hydrogen production through wind- and solar-based electrolysis against projections of demand for hydrogen fuel (not necessarily renewable) from the transportation sector in 2030.\nI developed the infographic to answer the following questions:\n\nWhat is the spatial distribution of electrolytic hydrogen supply and transportation sector demand in 2030?\nHow does electrolytic supply and transportation sector demand for hydrogen fuel compare within and between regions in 2030? Will individual regions be able to produce enough hydrogen through electrolysis to meet local transportation sector demand?\nWill individual counties in the Southern California region be able to produce enough hydrogen through electrolysis to meet local transportation sector demand?\n\n\n\n\n\nPower lines damaged by Winter Storm Uri in February 2021. Photograph sourced from https://www.crawco.com/blog/energy-companies-deal-with-the-aftermath-of-winter-storms-uri-and-viola\n\n\n\n\n\n\nI used data developed during my year-long Master’s Group Project, which aims to analyze the parity between potential supply of hydrogen through renewable resources and demand from California’s transportation sector, which will be the earliest large-scale adopter of hydrogen fuel.\nI used locational estimates of daily hydrogen production (kilograms/ day) through wind- or solar-based electrolysis that we developed by identifying renewable resource potential across space, excluding area unsuitable for renewable development, and siting electrolyzer (hydrogen production technology) facilities through an optimization model. I also used locational projections of transportation sector demand for hydrogen fuel in 2030 that were developed through a comprehensive technoeconomic study by the UC Davis Institute of Transportation Studies (Fulton et al., 2023). These data include the total quantities of hydrogen fuel (kilogram/ day) that will be demanded at future hydrogen re-fueling stations that will serve light-, medium-, and heavy-duty fuel cell electric vehicles (FCEV)."
  },
  {
    "objectID": "posts/2024-03-06-h2-data-viz/index.html#design-approach",
    "href": "posts/2024-03-06-h2-data-viz/index.html#design-approach",
    "title": "Vizualizing California’s Green Hydrogen Supply and Transportation Sector Demand",
    "section": "Design Approach",
    "text": "Design Approach\n\nGraphic Form\nIt took a lot of exploratory data analysis and many draft figures to decide which graphic forms to use. I decided to display the actual spatial locations through a map and then explored many different aggregations and displays for the other components.\n\n\nCode\n# .........................S&D Map.........................\n\n# plot  ----\np2 &lt;-\n  # plot\n  ggplot() +\n  geom_sf(data = ca_sf) +\n  geom_sf(data = h2_counties_sf, aes(fill = region, shape = \"Demand Center\"), alpha = 0.5, color = \"transparent\") +\n  geom_sf(data = elect_demand, aes(size = demand_capacity_served), col = \"grey40\", alpha = 0.7) +\n\n  # scale\n  scale_size(range = c(2, 5)) +\n  geom_sf(data = elect_renewables2, aes(shape = \"Production Site\"), col = \"black\", size = 2.5, alpha = 0.7) +\n  scale_fill_manual(\n    values = pal_regions,\n    breaks = c(\"Northern CA\", \"Central CA\", \"Coastal CA\", \"Southern CA\"),\n    guide = \"none\"\n  ) +\n  scale_x_continuous(limits = c(-125, -114)) +\n\n  # add labels and annotation\n  labs(\n    size = \"Demand (kg/ day)\",\n    shape = \"Location Type\",\n    title = \"Spatial Distribution of H2 Production and Demand (2030)\",\n  ) +\n  annotate(\n    geom = \"label\",\n    x = c(-123.8, -117, -122.1, -121.2),\n    y = c(39.6, 36.7, 35.9, 33.3),\n    label = c(\"Northern CA\", \"Central CA\", \"Coastal CA\", \"Southern CA\"),\n    color = pal_regions,\n    size = 4,\n    color = \"black\",\n    family = \"mont\",\n    fontface = \"bold\",\n    label.size = 1\n  ) +\n\n  # adjust theme\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 11, family = \"mont\", face = \"bold\", color = \"grey20\"),\n    plot.title.position = \"plot\",\n    plot.subtitle = element_text(size = 10, color = \"grey50\", family = \"mont\"),\n    legend.title = element_text(size = 10, family = \"mont\", face = \"bold\"),\n    legend.text = element_text(size = 9, family = \"mont\"),\n    legend.position = c(0.78, 0.74),\n    legend.background = element_rect(fill = alpha(\"grey97\", 0.5), color = \"grey80\"),\n    axis.title = element_blank(),\n    axis.text = element_blank(),\n    panel.grid = element_blank()\n  ) +\n  guides(\n    size = guide_legend(order = 2),\n    shape = guide_legend(order = 1, override.aes = list(color = c(\"grey50\", \"black\")))\n  )\n\np2\n\n\n\n\n\nI let the story hidden in the data guide the final product, as the most interesting findings were related to whether Southern California could meet its high daily demand. Once I had nailed down the narrative, I experimented with which types of plots and shapes would look best stitched together into one figure.\n\n\nText\nI used various text forms to explicitly state the story since most people are not familiar with the hydrogen space. I found it challenging to decide how much to explain since there is so much jargon related to this niche topic. Ultimately, I decided to include a substantial amount of background paragraphs to give the viewer meaningful context. I also used annotations on subplots to point out the most interesting results. I removed redundant axis labels and included meaningful titles for the subplots.\n\n\nThemes, Colors, & Typography\nI removed or lightened all the plot grid lines and used a white background for the infographic to reduce the amount of unnecessary ink included. I used the Montserrat font family throughout the infographic because my Master’s Group Project used it for our deliverables; that may be silly, but I found it really satisfying to stay consistent and also believe Montserrat invokes positive emotions and friendliness. I also used a slab serif, Alfa Slab One, to make the title stand out.\nI developed a pleasing color palette by using coolors.co and made sure they were accessible for people with visual impairments through the website’s tools. I intentionally used the same 4 distinctive colors to represent the regions of California across all the subplots and increased their transparency at times to improve readability.\n\n\nCode\n## ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n##                             Data visualization                           ----\n## ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\n# .........................Regional Histogram.........................\n# define background text ----\np1_text &lt;- glue::glue((\n  \"\n       Hydrogen fuel (H2) can be produced by combining water and\n       electricity through a process called electrolysis. When\n       renewable electricity (new wind and solar) is used in this\n       process, the resulting H2 is also considered renewable and\n       referred to as green H2. H2 produced through most other\n       processes have a negative environmental impact due to the\n       release of carbon emissions or air pollutants.\n\n       Both production and demand for H2 in California are expected\n       to increase in coming years. The transportation sector is\n       expected to be the earliest adopter of H2 for use in light-,\n       medium- and heavy-duty fuel cell electric vehicles (FCEVs).\n       Transportation demand is concentrated along major highways\n       and within densely populated neighborhoods.\n\n       Green H2 production is constrained to areas with sufficient\n       wind and solar resources, water availability, and favorable\n       permitting and regulation policies. Not all of these viable\n       areas align with transportation demand hotspots, meaning H2\n       distribution (which can be costly) and production through\n       other processes (which are not all renewable) may play an\n       important role in some places.\n\n       In 2030, Northern, Central, Coastal, and Southern CA will\n       all be able to produce far more than enough green H2 to\n       meet demand. Central and Northern CA will be the largest\n       producers of electrolytic hydrogen while Southern CA will\n       be the largest demander of H2 in transportation uses. All\n       the excess green H2 produced can be stored for later use\n       or distributed to areas in need.\n\n\"))\n\n#p1_text\n\n# pivot longer ----\nh2_regions_long &lt;- h2_counties %&gt;%\n  rename(Demand = demand_h2_kg_d, Production = supply_h2_kg_d) %&gt;%\n  pivot_longer(cols = Demand:Production, values_to = \"count\", names_to = \"type\") %&gt;%\n  mutate(\n    x = case_when(\n      type == \"Demand\" ~ 1,\n      type == \"Production\" ~ 2\n    ),\n    region = as.factor(region)\n  ) %&gt;%\n  group_by(region, type) %&gt;%\n  summarize(count = sum(count))\n\n# plot ----\np1 &lt;-\n  # format data\n  h2_regions_long %&gt;%\n  mutate(\n    region = factor(region, levels = (c(\"Central CA\", \"Northern CA\", \"Coastal CA\", \"Southern CA\"))),\n    type = case_when(\n      type == \"Demand\" ~ \"Demand (kg/d)\",\n      type == \"Production\" ~ \"Production (kg/d)\"\n    ),\n    type = factor(type, levels = rev(c(\"Demand (kg/d)\", \"Production (kg/d)\")))\n  ) %&gt;%\n  # plot and scale\n  ggplot(aes(x = region, y = count, pattern = type)) +\n  geom_col_pattern(fill = pal_regions2, position = \"dodge\", alpha = 0.8, color = \"grey0\") +\n  scale_pattern_manual(values = c(\"none\", \"wave\")) +\n  scale_pattern_fill_manual(values = c(\"black\", \"white\")) +\n  scale_y_continuous(expand = c(0.02, 0), labels = scales::label_number(scale_cut = cut_short_scale())) +\n  expand_limits(y = max(7000000)) +\n\n  # add labels and annotation\n  annotate(\"label\", x = 3.4, y = 5500000, label = \"Southern CA will\\ndemand the most\\nH2 fuel\", size = 4, family = \"mont\") +\n  annotate(\n    geom = \"curve\",\n    x = 4.0, xend = 4.25,\n    y = 5400000, yend = 1500000,\n    curvature = -0.5,\n    arrow = arrow(length = unit(0.3, \"cm\")),\n    alpha = 0.5\n  ) +\n  geom_text(aes(label = (c(\n    \"82k\", \"5.9M\",\n    \"35k\", \"1.9M\",\n    \"46k\", \"4.9M\",\n    \"252k\", \"1.8M\"\n  ))), color = \"black\", vjust = -0.9, hjust = 0.5, position = position_dodge(width = 0.9), family = \"mont\", fontface = \"bold\") +\n  labs(\n    y = \"\", x = \"\", subtitle = \"Regional Hydrogen Production and Demand (2030)\", #title = (p1_text)\n  ) +\n\n  # adjust theme\n  theme_minimal() +\n  theme(\n    #plot.title = element_text(size = 10, family = \"mont\", color = \"grey20\", margin = margin(b = 5, l = 20)),\n    #plot.title.position = \"plot\",\n    plot.subtitle = element_text(size = 14, face = \"bold\", family = \"mont\", hjust = 0.5, color = \"grey20\"),\n    legend.title = element_blank(),\n    legend.text = element_text(size = 12, family = \"mont\"), #, margin = margin(r = -3, unit = \"lines\")\n    legend.direction = \"horizontal\", \n    legend.position = \"top\",\n    legend.key.size = unit(0.5, \"cm\"),\n    #axis.title = element_text(size = 14, family = \"mont\"),\n    #axis.title.x = element_blank(),\n    axis.text.x = element_text(size = 14, family = \"mont\"),\n    axis.text.y = element_blank(),\n    panel.grid = element_blank(),\n    aspect.ratio = 0.4\n  ) +\n  guides(fill = guide_legend(reverse = TRUE))\n\np1\n\n\n\n\n\nI would also like to color the region names in the text using those same 4 colors, but will have to do so when I have more time to troubleshoot the tension between my graphic device and element_markdown()displays…\n\n\nGeneral Design\nI designed the overall layout of the canvas to create a visual hierarchy. Since most people read in an “F” or “E” formation, I placed the background text (which I want to be read first) on the very left-hand side and the deep-dive into Southern California counties (which I want to be read later on) on the right-hand side. I also bounded the latter in a bordered call-out box with the same background color as the Southern California region to signal to the viewer that it is an important deep dive. I also tried to limit the overall amount of ink used in plots when possible and isolated the text to a few key locations on the overall canvas.\nWithin the histogram plot, I ordered the regional values from highest to lowest production starting from the left-hand side; this allowed the fact that Southern CA has the lowest regional production to stand out in contrast to the text label that communicated Southern CA has the highest regional demand. In the dumbbell plot, I ordered the counties from largest to smallest difference starting from the top because I wanted to highlight the magnitude of the large differences first.\n\n\nCode\n# .........................SoCal Dumbbell Plot.........................\n# define text ----\np3_text &lt;- glue::glue(\n  \"   In Southern California, most individual counties will be\\n\ndaily net producers of green H2 in 2030. LA coungh is the only\\n\none that cannot produce enough green H2 to meet its local\\n\ntransportation demand. This means distribution of H2 from\\n\nsurrounding counties may play an important role for them. This\\n\ncould also mean that LA will rely on H2 from other production\\n\npathways that have a higher environmental footprint than\\n\nelectrolytic green H2.\n\"\n)\n\n# define function to rewrite values in shorthand format ----\ncustom_number_format &lt;- function(x) {\n  ifelse(x &gt;= 1e6,\n    gsub(\" \", \"\", sprintf(\"%sM\", format(round(x / 1e6, 1), nsmall = 1, big.mark = \"\"))),\n    gsub(\" \", \"\", sprintf(\"%sk\", format(round(x / 1e3), big.mark = \"\")))\n  )\n}\n\n# tidy data labels and values for dotted line in next plot ----\nsocal_counties &lt;- h2_counties %&gt;%\n  filter(county %in% southern_ca_counties) %&gt;%\n  mutate(\n    difference_abbr = (custom_number_format(difference)),\n    # difference_abbr = ifelse(difference_description == \"more supply\", \"+282k\", difference_abbr),\n    difference_description = case_when(\n      (supply_h2_kg_d - demand_h2_kg_d) &gt; 0 ~ \"more supply\",\n      (supply_h2_kg_d - demand_h2_kg_d) &lt; 0 ~ \"more demand\"\n    ),\n    dotted_line = ifelse(difference_description == \"more supply\", demand_h2_kg_d, supply_h2_kg_d)\n  ) %&gt;%\n  filter(county != \"Santa Barbara\")\n\n# plot ----\np3 &lt;-\n  # plot\n  socal_counties %&gt;%\n  ggplot() +\n  geom_segment(aes(x = 0, xend = dotted_line, y = reorder(county, difference), yend = reorder(county, difference)), alpha = 0.4, linetype = \"dotted\", linewidth = 0.5) +\n  geom_segment(aes(x = demand_h2_kg_d, xend = supply_h2_kg_d, y = reorder(county, difference), yend = reorder(county, difference), linetype = \"Difference\"), alpha = 0.4, linewidth = 1.5, color = \"#A05F54\") +\n  geom_point(aes(x = supply_h2_kg_d, y = reorder(county, difference), shape = \"Production\"), size = 2.5, fill = \"#D19180\", color = \"grey20\") +\n  geom_point(aes(x = demand_h2_kg_d, y = reorder(county, difference), shape = \"Demand\"), size = 2.5, fill = \"#9C6F6F\", color = \"grey20\") +\n\n  # scale\n  scale_shape_manual(values = c(\"Production\" = 24, \"Demand\" = 21), breaks = c(\"Production\", \"Demand\")) +\n  scale_x_continuous(labels = scales::label_number(scale_cut = cut_short_scale()), limits = c(0, 900000)) +\n\n  # add labels\n  labs(y = \"\", x = \"Hydrogen (kg/ day)\", subtitle = \"Difference between Daily Hydrogen Production and \\nDemand in Southern California Counties (2030)\"\n       #, title = p3_text\n       ) +\n  geom_text(\n    aes(\n      x = (demand_h2_kg_d + supply_h2_kg_d) / 2,\n      y = reorder(county, difference),\n      label = difference_abbr,\n      family = \"mont\",\n    ),\n    position = position_nudge(y = 0.4),\n    show.legend = FALSE,\n    size = 4\n  ) +\n\n  # adjust theme\n  theme_minimal() +\n  theme(\n    #plot.title = element_text(size = 9, hjust = 0, family = \"mont\", margin = margin(b = 20)),\n    #plot.title.position = \"plot\",\n    plot.subtitle = element_text(size = 12, hjust = 0.5, family = \"mont\", face = \"bold\", margin = margin(b = 10)),\n    legend.title = element_blank(),\n    legend.text = element_text(size = 10, family = \"mont\", face = \"bold\"),\n    legend.direction = \"horizontal\",\n    legend.position = \"top\",\n    legend.justification = c(4, 0),\n    legend.spacing.x = unit(-0, \"lines\"),\n    legend.margin = margin(-5, -5, 0, 0),\n    axis.title = element_text(size = 12, family = \"mont\"),\n    axis.title.x = element_text(family = \"mont\", margin = margin(t = 8)),\n    axis.text = element_text(size = 12, family = \"mont\"),\n    axis.text.y = element_text(size = 12, family = \"mont\"),\n    panel.grid = element_line(color = \"grey97\"),\n    panel.grid.major.y = element_blank(),\n    panel.grid.major.x = element_line(linewidth = 0.3),\n    plot.background = element_rect(colour = \"black\", fill = alpha(\"#9C6F6F\", 0.3), size = 5),\n    plot.margin = margin(t = 30, b = 30, r = 22, l = 22),\n    aspect.ratio = 0.6\n  ) +\n  guides(\n    linetype = guide_legend(order = 1, override.aes = list(x = -5, y = 1)),\n    shape = guide_legend(order = 2, override.aes = list(values = c(), fill = c(\"#D19180\", \"#9C6F6F\"), shape = c(24, 21)))\n  ) +\n\n  # add annotation\n  coord_cartesian(clip = \"off\") +\n  annotate(\"label\", x = 550000, y = 2, label = \"LA is the only county \\nthat cannot produce enough \\ngreen H2 to meet demand\", size = 4, family = \"mont\") +\n  annotate(\n    geom = \"curve\",\n    x = 270000, xend = 85000,\n    y = 1.8, yend = 1.2,\n    curvature = 0.3,\n    arrow = arrow(length = unit(0.3, \"cm\")),\n    alpha = 0.5\n  )\n\np3\n\n\n\n\n\nCode\n# add to blank plot to create white space ----\n# p3 &lt;- ggplot() +\n#   theme_void() +\n#   theme(\n#     plot.margin = margin(t = 20, r = 5, b = 20, l = 5, \"pt\")\n#   ) +\n#   inset_element(p3, left = 0.02, bottom = 0.05, right = 0.95, top = 0.98, align_to = \"full\")\n\n#p3\n\n\n\n\nContextualization and DEI\nI intend for this infographic to be used in a personal blog post about my Master’s Group Project, meaning that it will be combined with additional text that explains the caveats, implications, and findings of that project in greater detail. With this in mind, I only included a moderate amount of contextualization in the figure itself and did not discuss the equity considerations about hydrogen production and use. The purpose of the infographic itself is just to convey the spatial distribution of potential supply and demand to highlight the fact that all of the 2030 transportation sector demand can be met by electrolytic hydrogen alone."
  },
  {
    "objectID": "posts/2024-03-06-h2-data-viz/index.html#footnotes",
    "href": "posts/2024-03-06-h2-data-viz/index.html#footnotes",
    "title": "Vizualizing California’s Green Hydrogen Supply and Transportation Sector Demand",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nFulton, L.; Jenn, A.; Yang, C.; Burke, A.; Acharya, T.; Li, X., et al. (2023). California Hydrogen Analysis Project: The Future Role of Hydrogen in a Carbon-Neutral California: Final Synthesis Modeling Report. UC Davis: Hydrogen Pathways Program. Retrieved from https://escholarship.org/uc/item/27m7g841↩︎"
  },
  {
    "objectID": "posts/2024-03-06-h2-data-viz/index.html#code",
    "href": "posts/2024-03-06-h2-data-viz/index.html#code",
    "title": "Vizualizing California’s Green Hydrogen Supply and Transportation Sector Demand in 2030",
    "section": "Code",
    "text": "Code\n\n\nCode\n## ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n##                                    Setup                                 ----\n## ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\n# .........................load libraries.........................\nlibrary(tidyverse)\nlibrary(here)\nlibrary(sf)\nlibrary(ggspatial)\nlibrary(scales)\nlibrary(patchwork)\nlibrary(cowplot)\nlibrary(ggpubr)\nlibrary(ggtext)\nlibrary(ggpattern)\nlibrary(showtext)\nlibrary(magick)\n\n\n# ..........................load fonts...........................\nfont_add_google(name = \"Montserrat\", family = \"mont\")\nfont_add_google(name = \"Alfa Slab One\", family = \"alfa\")\nshowtext_auto()\n\n# .........................define color palettes.........................\n# define color palettes, from coolors\n# n = 4\npal_regions &lt;- c(\n  \"#64865B\", \"#664C5E\", \"#4F7D7A\", \"#D19180\"\n)\n\n# n = 8\npal_regions2 &lt;- c(\n  \"#5B656C\", \"#664C5E\",\n  \"#719B82\", \"#4F7D7A\",\n  \"#86A77D\", \"#64865B\",\n  \"#9C6F6F\", \"#D19180\"\n)\n\n# ..........................import data...........................\n# load CA polygon\nca_sf &lt;- spData::us_states %&gt;%\n  filter(GEOID == \"06\") %&gt;%\n  st_transform(crs = \"EPSG:4326\")\n\n# load ca county outlines\ncounties_sf &lt;- read_sf(here::here(\"data/census/tl_2022_us_county/tl_2022_us_county.shp\")) %&gt;%\n  filter(STATEFP == \"06\") %&gt;% # FIPS code for CA is 06\n  janitor::clean_names() %&gt;%\n  dplyr::select(countyfp, geoid, name, namelsad, geometry) %&gt;%\n  st_transform(crs = \"EPSG:4326\")\n\n# load transportation demand\ndemand_mod &lt;- st_read(here::here(\"data/fueling_demand_2030/fueling_demand_2030.shp\"), quiet = TRUE) %&gt;%\n  st_transform(crs = \"EPSG:4326\")\n\n# load combined demand electrolyzer outputs from script 05\nelect_demand &lt;- st_read(here::here(\"data/electrolyzers_output/electrolyzer_demand_limited_baseline_uncapped.geojson\"), quiet = TRUE) %&gt;%\n  st_transform(crs = \"EPSG:4326\") ## THIS INCLUDES GEOMS OF THE ELECTROLYZER POINTS\n\n# load combined renewables electrolyzer outputs from script 05\nelect_renewables &lt;- st_read(here::here(\"data/electrolyzers_output/electrolyzer_renewables_limited_baseline_uncapped.geojson\"), quiet = TRUE) %&gt;%\n  st_transform(crs = \"EPSG:4326\") ## THIS INCLUDES GEOMS OF THE ELECTROLYZER POINTS\n\n# load combined renewables electrolyzer outputs from script 05\nelect_renewables2 &lt;- st_read(here::here(\"data/electrolyzers_output/electrolyzer_renewables_renewablegeoms_limited_baseline_uncapped.geojson\"), quiet = TRUE) %&gt;%\n  st_transform(crs = \"EPSG:4326\") ## THIS INCLUDES GEOMS OF THE RENEWABLE POINTS\n\n## ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n##                          Data wrangling / cleaning                       ----\n## ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\n# .........................tidy and combine data.........................\n# spatially join county geoms to demand and supply data ----\n# demand_counties &lt;- demand_mod %&gt;% st_join(counties_sf, join = st_intersects)\ndemand_counties &lt;- demand_mod %&gt;% st_join(counties_sf, join = st_nearest_feature)\n\n# check that the total demand match before and after the spatial join\nsum(demand_counties$fueling) == sum(demand_mod$fueling)\n\nsupply_counties &lt;- elect_renewables2 %&gt;% st_join(counties_sf, join = st_nearest_feature) # for supply geoms based on renewables\n\n# sum county-wide hydrogen in each df ----\nh2_demand_counties &lt;- demand_counties %&gt;%\n  st_drop_geometry() %&gt;% # drop geometries\n  group_by(name) %&gt;% # name = county name\n  summarize(demand_h2_kg_d = sum(fueling)) # sum the amount of demand (kg/ d) within each county\n\nh2_supply_counties &lt;- supply_counties %&gt;%\n  st_drop_geometry() %&gt;% # drop geometries\n  group_by(name) %&gt;% # name = county name\n  summarize(supply_h2_kg_d = sum(potential_h2_kg_d)) # sum the amount of supply (kg/ d) within each county\n\n# combine demand and supply data ----\nh2_counties &lt;- h2_demand_counties %&gt;%\n  full_join(h2_supply_counties, by = \"name\") %&gt;% # join by county name\n  mutate(across(everything(), ~ ifelse(is.na(.), 0, .))) %&gt;% # replace NAs\n  rename(\"county\" = \"name\") %&gt;% # rename name column to county\n  mutate(difference = (supply_h2_kg_d - demand_h2_kg_d)) %&gt;% # calculate difference between supply and demand amounts\n  arrange(desc(difference)) # arrange in order based on difference\n\n# id counties that need to be added to df\nadd_counties &lt;- cat(paste(sprintf('\"%s\"', sort(counties_sf$name[!(counties_sf$name %in% h2_counties$county)])), collapse = \", \"))\n\n# add counties with 0 supply and 0 demand ----\nno_h2_counties &lt;- data.frame(\n  county = c(\"Amador\", \"Colusa\", \"Del Norte\", \"Kings\", \"Lake\", \"Lassen\", \"Mendocino\", \"Modoc\", \"Mono\", \"Napa\", \"San Francisco\", \"San Luis Obispo\", \"Santa Barbara\", \"Santa Cruz\", \"Sierra\", \"Sonoma\", \"Stanislaus\", \"Sutter\", \"Trinity\", \"Yolo\", \"Yuba\"),\n  supply_h2_kg_d = 0,\n  demand_h2_kg_d = 0,\n  difference = 0\n)\n\n# add new rows to the existing dataframe using rbind\nh2_counties &lt;- rbind(h2_counties, no_h2_counties)\n\n\n# .........................define state regions.........................\n# define counties within each state region. based on https://ww2.arb.ca.gov/lcti-central-region\ncoastal_ca_counties &lt;- c(\"Alameda\", \"Contra Costa\", \"Marin\", \"Monterey\", \"Napa\", \"San Benito\", \"San Francisco\", \"San Mateo\", \"San Luis Obispo\", \"Santa Clara\", \"Santa Cruz\", \"Sonoma\", \"Solano\")\n\nnorthern_ca_counties &lt;- c(\"Alpine\", \"Amador\", \"Butte\", \"Calaveras\", \"Colusa\", \"Del Norte\", \"El Dorado\", \"Glenn\", \"Humboldt\", \"Lake\", \"Lassen\", \"Mendocino\", \"Modoc\", \"Nevada\", \"Placer\", \"Plumas\", \"Sacramento\", \"Shasta\", \"Sierra\", \"Siskiyou\", \"Sutter\", \"Tehama\", \"Trinity\", \"Yolo\", \"Yuba\")\n\ncentral_ca_counties &lt;- c(\"Fresno\", \"Inyo\", \"Kern\", \"Kings\", \"Madera\", \"Mariposa\", \"Merced\", \"Mono\", \"San Joaquin\", \"Stanislaus\", \"Tulare\", \"Tuolumne\")\n\nsouthern_ca_counties &lt;- c(\"Imperial\", \"Los Angeles\", \"Orange\", \"Riverside\", \"San Bernardino\", \"San Diego\", \"Santa Barbara\", \"Ventura\")\n\n# add regions and difference groupings to df ----\nh2_counties &lt;- h2_counties %&gt;%\n  mutate(\n    region = case_when(\n      county %in% northern_ca_counties ~ \"Northern CA\",\n      county %in% southern_ca_counties ~ \"Southern CA\",\n      county %in% central_ca_counties ~ \"Central CA\",\n      county %in% coastal_ca_counties ~ \"Coastal CA\"\n    ),\n    difference_description = case_when(\n      (supply_h2_kg_d - demand_h2_kg_d) &gt; 0 ~ \"more supply\",\n      (supply_h2_kg_d - demand_h2_kg_d) &lt; 0 ~ \"more demand\"\n    )\n  )\n\n# add county geometries back to full df ---\nh2_counties_sf &lt;- left_join(counties_sf, h2_counties, by = c(\"name\" = \"county\")) %&gt;%\n  mutate(region = ifelse(name == \"San Francisco\", \"Northern CA\", region))\n\n\n## ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n##                             Data visualization                           ----\n## ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\n# .........................Regional Histogram.........................\n# define background text ----\np1_text &lt;- glue::glue((\n  \"\n       Hydrogen fuel (H2) can be produced by combining water and\n       electricity through a process called electrolysis. When\n       renewable electricity (new wind and solar) is used in this\n       process, the resulting H2 is also considered renewable and\n       referred to as green H2. H2 produced through most other\n       processes have a negative environmental impact due to the\n       release of carbon emissions or air pollutants.\n\n       Both production and demand for H2 in California are expected\n       to increase in coming years. The transportation sector is\n       expected to be the earliest adopter of H2 for use in light-,\n       medium- and heavy-duty fuel cell electric vehicles (FCEVs).\n       Transportation demand is concentrated along major highways\n       and within densely populated neighborhoods.\n\n       Green H2 production is constrained to areas with sufficient\n       wind and solar resources, water availability, and favorable\n       permitting and regulation policies. Not all of these viable\n       areas align with transportation demand hotspots, meaning H2\n       distribution (which can be costly) and production through\n       other processes (which are not all renewable) may play an\n       important role in some places.\n\n       In 2030, Northern, Central, Coastal, and Southern CA will\n       all be able to produce far more than enough green H2 to\n       meet demand. Central and Northern CA will be the largest\n       producers of electrolytic hydrogen while Southern CA will\n       be the largest demander of H2 in transportation uses. All\n       the excess green H2 produced can be stored for later use\n       or distributed to areas in need.\n\n\"))\n\np1_text\n\n# pivot longer ----\nh2_regions_long &lt;- h2_counties %&gt;%\n  rename(Demand = demand_h2_kg_d, Production = supply_h2_kg_d) %&gt;%\n  pivot_longer(cols = Demand:Production, values_to = \"count\", names_to = \"type\") %&gt;%\n  mutate(\n    x = case_when(\n      type == \"Demand\" ~ 1,\n      type == \"Production\" ~ 2\n    ),\n    region = as.factor(region)\n  ) %&gt;%\n  group_by(region, type) %&gt;%\n  summarize(count = sum(count))\n\n# plot ----\np1 &lt;-\n  # format data\n  h2_regions_long %&gt;%\n  mutate(\n    region = factor(region, levels = (c(\"Central CA\", \"Northern CA\", \"Coastal CA\", \"Southern CA\"))),\n    type = case_when(\n      type == \"Demand\" ~ \"Demand (kg/d)\",\n      type == \"Production\" ~ \"Production (kg/d)\"\n    ),\n    type = factor(type, levels = rev(c(\"Demand (kg/d)\", \"Production (kg/d)\")))\n  ) %&gt;%\n  # plot and scale\n  ggplot(aes(x = region, y = count, pattern = type)) +\n  geom_col_pattern(fill = pal_regions2, position = \"dodge\", alpha = 0.8, color = \"grey0\") +\n  scale_pattern_manual(values = c(\"none\", \"wave\")) +\n  scale_pattern_fill_manual(values = c(\"black\", \"white\")) +\n  scale_y_continuous(expand = c(0.02, 0), labels = scales::label_number(scale_cut = cut_short_scale())) +\n  expand_limits(y = max(7000000)) +\n\n  # add labels and annotation\n  annotate(\"label\", x = 3.4, y = 5500000, label = \"Southern CA will\\ndemand the most\\nH2 fuel\", size = 3, family = \"mont\") +\n  annotate(\n    geom = \"curve\",\n    x = 4.0, xend = 4.25,\n    y = 5400000, yend = 1500000,\n    curvature = -0.5,\n    arrow = arrow(length = unit(0.3, \"cm\")),\n    alpha = 0.5\n  ) +\n  geom_text(aes(label = (c(\n    \"82k\", \"5.9M\",\n    \"35k\", \"1.9M\",\n    \"46k\", \"4.9M\",\n    \"252k\", \"1.8M\"\n  ))), color = \"black\", vjust = -0.9, hjust = 0.5, position = position_dodge(width = 0.9), family = \"mont\", fontface = \"bold\") +\n  labs(\n    y = \"\", x = \"\", subtitle = \"Regional Hydrogen Production and Demand (2030)\", title = (p1_text)\n  ) +\n\n  # adjust theme\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 10, family = \"mont\", color = \"grey20\", margin = margin(b = 5, l = 20)),\n    plot.title.position = \"plot\",\n    plot.subtitle = element_text(size = 12, face = \"bold\", family = \"mont\", hjust = 0.5, color = \"grey20\"),\n    legend.title = element_blank(),\n    legend.text = element_text(size = 10, family = \"mont\", margin = margin(r = -3, unit = \"lines\")),\n    legend.direction = \"horizontal\",\n    legend.position = \"top\",\n    legend.key.size = unit(0.5, \"cm\"),\n    axis.title = element_text(size = 12, family = \"mont\"),\n    axis.title.x = element_blank(),\n    axis.text.x = element_text(size = 11, family = \"mont\"),\n    axis.text.y = element_blank(),\n    panel.grid = element_blank(),\n    aspect.ratio = 0.4\n  ) +\n  guides(fill = guide_legend(reverse = TRUE))\n\np1\n\n# .........................S&D Map.........................\n\n# plot  ----\np2 &lt;-\n  # plot\n  ggplot() +\n  geom_sf(data = ca_sf) +\n  geom_sf(data = h2_counties_sf, aes(fill = region, shape = \"Demand Center\"), alpha = 0.5, color = \"transparent\") +\n  geom_sf(data = elect_demand, aes(size = demand_capacity_served), col = \"grey40\", alpha = 0.7) +\n\n  # scale\n  scale_size(range = c(2, 5)) +\n  geom_sf(data = elect_renewables2, aes(shape = \"Production Site\"), col = \"black\", size = 2.5, alpha = 0.7) +\n  scale_fill_manual(\n    values = pal_regions,\n    breaks = c(\"Northern CA\", \"Central CA\", \"Coastal CA\", \"Southern CA\"),\n    guide = \"none\"\n  ) +\n  scale_x_continuous(limits = c(-125, -114)) +\n\n  # add labels and annotation\n  labs(\n    size = \"Demand (kg/ day)\",\n    shape = \"Location Type\",\n    title = \"Spatial Distribution of H2 Production and Demand (2030)\",\n  ) +\n  annotate(\n    geom = \"label\",\n    x = c(-123.8, -117, -122.1, -121.2),\n    y = c(39.6, 36.7, 35.9, 33.3),\n    label = c(\"Northern CA\", \"Central CA\", \"Coastal CA\", \"Southern CA\"),\n    color = pal_regions,\n    size = 4,\n    color = \"black\",\n    family = \"mont\",\n    fontface = \"bold\",\n    label.size = 1\n  ) +\n\n  # adjust theme\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 11, family = \"mont\", face = \"bold\", color = \"grey20\"),\n    plot.title.position = \"plot\",\n    plot.subtitle = element_text(size = 10, color = \"grey50\", family = \"mont\"),\n    legend.title = element_text(size = 10, family = \"mont\", face = \"bold\"),\n    legend.text = element_text(size = 9, family = \"mont\"),\n    legend.position = c(0.78, 0.74),\n    legend.background = element_rect(fill = alpha(\"grey97\", 0.5), color = \"grey80\"),\n    axis.title = element_blank(),\n    axis.text = element_blank(),\n    panel.grid = element_blank()\n  ) +\n  guides(\n    size = guide_legend(order = 2),\n    shape = guide_legend(order = 1, override.aes = list(color = c(\"grey50\", \"black\")))\n  )\n\nprint(p2)\n\n# .........................SoCal Dumbbell Plot.........................\n# define text ----\np3_text &lt;- glue::glue(\n  \"   In Southern California, most individual counties will be\\n\ndaily net producers of green H2 in 2030. LA coungh is the only\\n\none that cannot produce enough green H2 to meet its local\\n\ntransportation demand. This means distribution of H2 from\\n\nsurrounding counties may play an important role for them. This\\n\ncould also mean that LA will rely on H2 from other production\\n\npathways that have a higher environmental footprint than\\n\nelectrolytic green H2.\n\"\n)\n\n# define function to rewrite values in shorthand format ----\ncustom_number_format &lt;- function(x) {\n  ifelse(x &gt;= 1e6,\n    gsub(\" \", \"\", sprintf(\"%sM\", format(round(x / 1e6, 1), nsmall = 1, big.mark = \"\"))),\n    gsub(\" \", \"\", sprintf(\"%sk\", format(round(x / 1e3), big.mark = \"\")))\n  )\n}\n\n# tidy data labels and values for dotted line in next plot ----\nsocal_counties &lt;- h2_counties %&gt;%\n  filter(county %in% southern_ca_counties) %&gt;%\n  mutate(\n    difference_abbr = (custom_number_format(difference)),\n    # difference_abbr = ifelse(difference_description == \"more supply\", \"+282k\", difference_abbr),\n    difference_description = case_when(\n      (supply_h2_kg_d - demand_h2_kg_d) &gt; 0 ~ \"more supply\",\n      (supply_h2_kg_d - demand_h2_kg_d) &lt; 0 ~ \"more demand\"\n    ),\n    dotted_line = ifelse(difference_description == \"more supply\", demand_h2_kg_d, supply_h2_kg_d)\n  ) %&gt;%\n  filter(county != \"Santa Barbara\")\n\n# plot ----\np3 &lt;-\n  # plot\n  socal_counties %&gt;%\n  ggplot() +\n  geom_segment(aes(x = 0, xend = dotted_line, y = reorder(county, difference), yend = reorder(county, difference)), alpha = 0.4, linetype = \"dotted\", linewidth = 0.5) +\n  geom_segment(aes(x = demand_h2_kg_d, xend = supply_h2_kg_d, y = reorder(county, difference), yend = reorder(county, difference), linetype = \"Difference\"), alpha = 0.4, linewidth = 1.5, color = \"#A05F54\") +\n  geom_point(aes(x = supply_h2_kg_d, y = reorder(county, difference), shape = \"Production\"), size = 2.5, fill = \"#D19180\", color = \"grey20\") +\n  geom_point(aes(x = demand_h2_kg_d, y = reorder(county, difference), shape = \"Demand\"), size = 2.5, fill = \"#9C6F6F\", color = \"grey20\") +\n\n  # scale\n  scale_shape_manual(values = c(\"Production\" = 24, \"Demand\" = 21), breaks = c(\"Production\", \"Demand\")) +\n  scale_x_continuous(labels = scales::label_number(scale_cut = cut_short_scale()), limits = c(0, 900000)) +\n\n  # add labels\n  labs(y = \"\", x = \"Hydrogen (kg/ day)\", subtitle = \"Difference between Daily Hydrogen Production and \\nDemand in Southern California Counties (2030)\", title = p3_text) +\n  geom_text(\n    aes(\n      x = (demand_h2_kg_d + supply_h2_kg_d) / 2,\n      y = reorder(county, difference),\n      label = difference_abbr,\n      family = \"mont\",\n    ),\n    position = position_nudge(y = 0.4),\n    show.legend = FALSE,\n    size = 3\n  ) +\n\n  # adjust theme\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 9, hjust = 0, family = \"mont\", margin = margin(b = 20)),\n    plot.title.position = \"plot\",\n    plot.subtitle = element_text(size = 10, hjust = 0.5, family = \"mont\", face = \"bold\", margin = margin(b = 10)),\n    legend.title = element_blank(),\n    legend.text = element_text(size = 8, family = \"mont\", face = \"bold\"),\n    legend.direction = \"horizontal\",\n    legend.position = \"top\",\n    legend.justification = c(4, 0),\n    legend.spacing.x = unit(-0, \"lines\"),\n    legend.margin = margin(-5, -5, 0, 0),\n    axis.title = element_text(size = 8, family = \"mont\"),\n    axis.title.x = element_text(family = \"mont\", margin = margin(t = 8)),\n    axis.text = element_text(size = 8, family = \"mont\"),\n    axis.text.y = element_text(size = 8, family = \"mont\"),\n    panel.grid = element_line(color = \"grey97\"),\n    panel.grid.major.y = element_blank(),\n    panel.grid.major.x = element_line(linewidth = 0.3),\n    plot.background = element_rect(colour = \"black\", fill = alpha(\"#9C6F6F\", 0.3), size = 5),\n    plot.margin = margin(t = 20, b = 20, r = 20, l = 20),\n    aspect.ratio = 0.6\n  ) +\n  guides(\n    linetype = guide_legend(order = 1, override.aes = list(x = -5, y = 1)),\n    shape = guide_legend(order = 2, override.aes = list(values = c(), fill = c(\"#D19180\", \"#9C6F6F\"), shape = c(24, 21)))\n  ) +\n\n  # add annotation\n  coord_cartesian(clip = \"off\") +\n  annotate(\"label\", x = 600000, y = 2, label = \"LA is the only county \\nthat cannot produce enough \\ngreen H2 to meet demand\", size = 3, family = \"mont\") +\n  annotate(\n    geom = \"curve\",\n    x = 270000, xend = 85000,\n    y = 1.8, yend = 1.2,\n    curvature = 0.3,\n    arrow = arrow(length = unit(0.3, \"cm\")),\n    alpha = 0.5\n  )\n\np3\n\n# add to blank plot to create white space ----\np3 &lt;- ggplot() +\n  theme_void() +\n  theme(\n    plot.margin = margin(t = 20, r = 5, b = 20, l = 5, \"pt\")\n  ) +\n  inset_element(p3, left = 0.02, bottom = 0.05, right = 0.95, top = 0.98, align_to = \"full\")\n\np3\n\n## ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n##                             Final Infographic                           ----\n## ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n# load images\nplt1 &lt;- image_read(\"figures/p1.png\") %&gt;%\n  image_ggplot()\n\nplt2 &lt;- image_read(\"figures/p2.png\") %&gt;%\n  image_ggplot()\n\nplt3 &lt;- image_read(\"figures/p3b.png\") %&gt;%\n  image_ggplot()\n\n\n# combine\nplot &lt;- plt1 + plt2 + plt3\n\nplot +\n  plot_annotation(\n    title = \"How much Hydrogen?\",\n    caption = \"\n    Author: Kristin Art\n    Data: Bren H2GO Master's Group Project\n    \"\n  ) &\n  theme(\n    plot.title = element_text(size = 22, hjust = 0.01, family = \"alfa\", colour = \"grey10\"),\n    plot.caption = element_text(size = 8, family = \"mont\")\n  )\n\n# save figure\nggsave(\"figures/infographic_final.png\", bg = \"white\", units = \"in\", width = 12, height = 7)"
  }
]